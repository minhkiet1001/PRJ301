package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import dto.RoomDTO;
import dto.ReviewDTO;
import dao.ReviewDAO;
import dao.UserDAO;
import dto.UserDTO;
import java.util.List;
import java.text.SimpleDateFormat;
import dto.UserDTO;

public final class room_002ddetails_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.ArrayList<String>(2);
    _jspx_dependants.add("/header.jsp");
    _jspx_dependants.add("/footer.jsp");
  }

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html lang=\"vi\">\n");
      out.write("<head>\n");
      out.write("    <meta charset=\"UTF-8\">\n");
      out.write("    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n");
      out.write("    <title>Chi ti·∫øt ph√≤ng</title>\n");
      out.write("    <style>\n");
      out.write("        /* CSS gi·ªØ nguy√™n nh∆∞ code b·∫°n g·ª≠i */\n");
      out.write("        * {\n");
      out.write("            margin: 0;\n");
      out.write("            padding: 0;\n");
      out.write("            box-sizing: border-box;\n");
      out.write("            font-family: 'Segoe UI', Arial, sans-serif;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        body {\n");
      out.write("            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n");
      out.write("            color: #333;\n");
      out.write("            min-height: 100vh;\n");
      out.write("            display: flex;\n");
      out.write("            flex-direction: column;\n");
      out.write("            overflow-x: hidden;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .header-container, .footer-container {\n");
      out.write("            width: 100%;\n");
      out.write("            z-index: 1000;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .main-content {\n");
      out.write("            flex: 1;\n");
      out.write("            padding: 80px 0 80px;\n");
      out.write("            max-width: 1200px;\n");
      out.write("            margin: 0 auto;\n");
      out.write("            width: 90%;\n");
      out.write("            position: relative;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-layout {\n");
      out.write("            display: flex;\n");
      out.write("            flex-wrap: wrap;\n");
      out.write("            width: 100%;\n");
      out.write("            margin-bottom: 30px;\n");
      out.write("            align-items: flex-start;\n");
      out.write("            gap: 20px;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-gallery-section {\n");
      out.write("            width: 350px;\n");
      out.write("            background: white;\n");
      out.write("            border-radius: 15px;\n");
      out.write("            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n");
      out.write("            overflow: hidden;\n");
      out.write("            transition: transform 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-gallery-section:hover {\n");
      out.write("            transform: translateY(-5px);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-gallery {\n");
      out.write("            position: relative;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-gallery img {\n");
      out.write("            width: 100%;\n");
      out.write("            height: 400px;\n");
      out.write("            object-fit: cover;\n");
      out.write("            border-radius: 15px 15px 0 0;\n");
      out.write("            display: none;\n");
      out.write("            transition: opacity 0.5s ease-in-out;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-gallery img.active {\n");
      out.write("            display: block;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .prev, .next {\n");
      out.write("            position: absolute;\n");
      out.write("            top: 50%;\n");
      out.write("            transform: translateY(-50%);\n");
      out.write("            background: rgba(0, 0, 0, 0.6);\n");
      out.write("            color: white;\n");
      out.write("            border: none;\n");
      out.write("            padding: 12px 18px;\n");
      out.write("            cursor: pointer;\n");
      out.write("            border-radius: 50%;\n");
      out.write("            font-size: 24px;\n");
      out.write("            transition: background 0.3s ease, transform 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .prev:hover, .next:hover {\n");
      out.write("            background: rgba(0, 0, 0, 0.9);\n");
      out.write("            transform: translateY(-50%) scale(1.1);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .prev { left: 20px; }\n");
      out.write("        .next { right: 20px; }\n");
      out.write("\n");
      out.write("        .scrollable-content {\n");
      out.write("            flex: 1;\n");
      out.write("            background: white;\n");
      out.write("            padding: 25px;\n");
      out.write("            border-radius: 15px;\n");
      out.write("            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n");
      out.write("            max-height: 600px;\n");
      out.write("            overflow-y: auto;\n");
      out.write("            transition: box-shadow 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .scrollable-content:hover {\n");
      out.write("            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-info-section h2 {\n");
      out.write("            font-size: 32px;\n");
      out.write("            font-weight: 700;\n");
      out.write("            margin-bottom: 15px;\n");
      out.write("            color: #2c3e50;\n");
      out.write("            line-height: 1.2;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-info-section p {\n");
      out.write("            font-size: 16px;\n");
      out.write("            margin-bottom: 20px;\n");
      out.write("            line-height: 1.6;\n");
      out.write("            color: #666;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-info-section strong {\n");
      out.write("            color: #5DC1B9;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-amenities, .room-reviews {\n");
      out.write("            margin-top: 30px;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-amenities h3, .room-reviews h3 {\n");
      out.write("            font-size: 24px;\n");
      out.write("            font-weight: 600;\n");
      out.write("            margin-bottom: 15px;\n");
      out.write("            color: #2c3e50;\n");
      out.write("            border-bottom: 2px solid #5DC1B9;\n");
      out.write("            padding-bottom: 5px;\n");
      out.write("            display: inline-block;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .amenities-list {\n");
      out.write("            display: grid;\n");
      out.write("            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n");
      out.write("            gap: 15px;\n");
      out.write("            margin-top: 15px;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .amenity-item {\n");
      out.write("            display: flex;\n");
      out.write("            align-items: center;\n");
      out.write("            gap: 10px;\n");
      out.write("            background: #f8f9fa;\n");
      out.write("            padding: 12px 15px;\n");
      out.write("            border-radius: 10px;\n");
      out.write("            transition: transform 0.3s ease, box-shadow 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .amenity-item:hover {\n");
      out.write("            transform: translateY(-3px);\n");
      out.write("            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .amenity-item i {\n");
      out.write("            font-size: 22px;\n");
      out.write("            color: #5DC1B9;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .amenity-item p {\n");
      out.write("            margin: 0;\n");
      out.write("            font-size: 15px;\n");
      out.write("            font-weight: 500;\n");
      out.write("            color: #333;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .review-form {\n");
      out.write("            margin-top: 20px;\n");
      out.write("            background: #f8f9fa;\n");
      out.write("            padding: 20px;\n");
      out.write("            border-radius: 10px;\n");
      out.write("            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .review-form h4 {\n");
      out.write("            font-size: 18px;\n");
      out.write("            font-weight: 600;\n");
      out.write("            margin-bottom: 15px;\n");
      out.write("            color: #2c3e50;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .rating-stars {\n");
      out.write("            display: flex;\n");
      out.write("            gap: 5px;\n");
      out.write("            margin-bottom: 15px;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .rating-stars .star {\n");
      out.write("            font-size: 24px;\n");
      out.write("            color: #ccc;\n");
      out.write("            cursor: pointer;\n");
      out.write("            transition: color 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .rating-stars .star.active {\n");
      out.write("            color: #ffcc00;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .review-form textarea {\n");
      out.write("            width: 100%;\n");
      out.write("            padding: 12px;\n");
      out.write("            border: 1px solid #ddd;\n");
      out.write("            border-radius: 8px;\n");
      out.write("            font-size: 15px;\n");
      out.write("            margin-bottom: 15px;\n");
      out.write("            resize: vertical;\n");
      out.write("            transition: border-color 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .review-form textarea:focus {\n");
      out.write("            border-color: #5DC1B9;\n");
      out.write("            outline: none;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .review-form button {\n");
      out.write("            padding: 12px 25px;\n");
      out.write("            background: linear-gradient(45deg, #5DC1B9, #4ECDC4);\n");
      out.write("            color: white;\n");
      out.write("            border: none;\n");
      out.write("            border-radius: 8px;\n");
      out.write("            font-size: 16px;\n");
      out.write("            font-weight: 600;\n");
      out.write("            cursor: pointer;\n");
      out.write("            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .review-form button:hover {\n");
      out.write("            background: linear-gradient(45deg, #4ECDC4, #45b7d1);\n");
      out.write("            transform: scale(1.05);\n");
      out.write("            box-shadow: 0 6px 15px rgba(93, 193, 185, 0.6);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .review-list .review-item {\n");
      out.write("            background: #f8f9fa;\n");
      out.write("            padding: 15px;\n");
      out.write("            border-radius: 10px;\n");
      out.write("            margin-bottom: 15px;\n");
      out.write("            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n");
      out.write("            transition: transform 0.3s ease, box-shadow 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .review-item:hover {\n");
      out.write("            transform: translateY(-3px);\n");
      out.write("            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .review-item p {\n");
      out.write("            margin: 5px 0;\n");
      out.write("            font-size: 15px;\n");
      out.write("            color: #555;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .review-item .rating {\n");
      out.write("            color: #ffcc00;\n");
      out.write("            font-size: 16px;\n");
      out.write("            font-weight: 600;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .action-info-section {\n");
      out.write("            width: 300px;\n");
      out.write("            background: white;\n");
      out.write("            border-radius: 15px;\n");
      out.write("            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n");
      out.write("            padding: 25px;\n");
      out.write("            transition: transform 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .action-info-section:hover {\n");
      out.write("            transform: translateY(-5px);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .action-info-section .price {\n");
      out.write("            font-size: 28px;\n");
      out.write("            font-weight: 700;\n");
      out.write("            color: #e74c3c;\n");
      out.write("            margin-bottom: 20px;\n");
      out.write("            text-align: center;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .action-info-section .rating {\n");
      out.write("            font-size: 16px;\n");
      out.write("            color: #2c3e50;\n");
      out.write("            margin-bottom: 20px;\n");
      out.write("            text-align: center;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .action-info-section .rating .stars {\n");
      out.write("            color: #ffcc00;\n");
      out.write("            margin-left: 5px;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .btn-book {\n");
      out.write("            display: block;\n");
      out.write("            padding: 14px 0;\n");
      out.write("            background: linear-gradient(45deg, #e74c3c, #c0392b);\n");
      out.write("            color: white;\n");
      out.write("            text-decoration: none;\n");
      out.write("            border-radius: 10px;\n");
      out.write("            font-size: 18px;\n");
      out.write("            font-weight: 600;\n");
      out.write("            text-align: center;\n");
      out.write("            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;\n");
      out.write("            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .btn-book:hover {\n");
      out.write("            background: linear-gradient(45deg, #c0392b, #a93226);\n");
      out.write("            transform: scale(1.05);\n");
      out.write("            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.6);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .contact-info {\n");
      out.write("            text-align: left;\n");
      out.write("            font-size: 15px;\n");
      out.write("            color: #666;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .contact-info h4 {\n");
      out.write("            font-size: 18px;\n");
      out.write("            font-weight: 600;\n");
      out.write("            color: #2c3e50;\n");
      out.write("            margin-bottom: 15px;\n");
      out.write("            border-bottom: 2px solid #5DC1B9;\n");
      out.write("            padding-bottom: 5px;\n");
      out.write("            display: inline-block;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .contact-info p {\n");
      out.write("            margin-bottom: 10px;\n");
      out.write("            display: flex;\n");
      out.write("            align-items: center;\n");
      out.write("            gap: 8px;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .contact-info i {\n");
      out.write("            color: #5DC1B9;\n");
      out.write("            font-size: 18px;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .btn-contact {\n");
      out.write("            display: block;\n");
      out.write("            padding: 12px 0;\n");
      out.write("            background: linear-gradient(45deg, #5DC1B9, #4ECDC4);\n");
      out.write("            color: white;\n");
      out.write("            text-decoration: none;\n");
      out.write("            border-radius: 10px;\n");
      out.write("            font-size: 16px;\n");
      out.write("            font-weight: 600;\n");
      out.write("            text-align: center;\n");
      out.write("            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;\n");
      out.write("            box-shadow: 0 4px 15px rgba(93, 193, 185, 0.4);\n");
      out.write("            margin-bottom: 10px;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .btn-contact:hover {\n");
      out.write("            background: linear-gradient(45deg, #4ECDC4, #45b7d1);\n");
      out.write("            transform: scale(1.05);\n");
      out.write("            box-shadow: 0 6px 20px rgba(93, 193, 185, 0.6);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-location {\n");
      out.write("            width: 100%;\n");
      out.write("            margin-top: 30px;\n");
      out.write("            background: white;\n");
      out.write("            border-radius: 15px;\n");
      out.write("            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n");
      out.write("            padding: 30px;\n");
      out.write("            transition: box-shadow 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-location:hover {\n");
      out.write("            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-location h3 {\n");
      out.write("            font-size: 24px;\n");
      out.write("            font-weight: 600;\n");
      out.write("            margin-bottom: 15px;\n");
      out.write("            color: #2c3e50;\n");
      out.write("            border-bottom: 2px solid #5DC1B9;\n");
      out.write("            padding-bottom: 5px;\n");
      out.write("            display: inline-block;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-location p {\n");
      out.write("            font-size: 16px;\n");
      out.write("            color: #666;\n");
      out.write("            margin-bottom: 20px;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-location iframe {\n");
      out.write("            width: 100%;\n");
      out.write("            height: 350px;\n");
      out.write("            border: 0;\n");
      out.write("            border-radius: 15px;\n");
      out.write("            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n");
      out.write("            transition: box-shadow 0.3s ease;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .room-location iframe:hover {\n");
      out.write("            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        @media (max-width: 1024px) {\n");
      out.write("            .room-layout {\n");
      out.write("                flex-direction: column;\n");
      out.write("                gap: 15px;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .room-gallery-section, .scrollable-content, .action-info-section {\n");
      out.write("                width: 100%;\n");
      out.write("                margin-right: 0;\n");
      out.write("                margin-bottom: 0;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .scrollable-content {\n");
      out.write("                max-height: none;\n");
      out.write("                overflow-y: visible;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .room-gallery img {\n");
      out.write("                height: 300px;\n");
      out.write("            }\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        @media (max-width: 768px) {\n");
      out.write("            .main-content {\n");
      out.write("                padding: 60px 0 70px;\n");
      out.write("                width: 100%;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .room-info-section h2 {\n");
      out.write("                font-size: 28px;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .room-amenities h3, .room-reviews h3, .room-location h3 {\n");
      out.write("                font-size: 22px;\n");
      out.write("            }\n");
      out.write("        }\n");
      out.write("    </style>\n");
      out.write("    <script src=\"https://kit.fontawesome.com/a076d05399.js\" crossorigin=\"anonymous\"></script>\n");
      out.write("</head>\n");
      out.write("<body>\n");
      out.write("    <div class=\"header-container\">\n");
      out.write("        ");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html>\n");
      out.write("    <head>\n");
      out.write("        <meta charset=\"UTF-8\">\n");
      out.write("        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n");
      out.write("        <title>Header</title>\n");
      out.write("        <style>\n");
      out.write("            * {\n");
      out.write("                margin: 0;\n");
      out.write("                padding: 0;\n");
      out.write("                box-sizing: border-box;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            body {\n");
      out.write("                margin: 0;\n");
      out.write("                font-family: 'Segoe UI', Arial, sans-serif;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            header {\n");
      out.write("                background: linear-gradient(45deg, #5DC1B9, #4ECDC4);\n");
      out.write("                color: white;\n");
      out.write("                padding: 10px 50px;\n");
      out.write("                position: fixed;\n");
      out.write("                top: 0;\n");
      out.write("                left: 0;\n");
      out.write("                width: 100%;\n");
      out.write("                z-index: 1000;\n");
      out.write("                transition: all 0.3s ease-in-out;\n");
      out.write("                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .container {\n");
      out.write("                display: flex;\n");
      out.write("                justify-content: space-between;\n");
      out.write("                align-items: center;\n");
      out.write("                max-width: 1200px;\n");
      out.write("                margin: 0 auto;\n");
      out.write("                height: 60px;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .logo {\n");
      out.write("                font-size: 28px;\n");
      out.write("                font-weight: 700;\n");
      out.write("                letter-spacing: 1.5px;\n");
      out.write("                color: #ffffff;\n");
      out.write("                transition: transform 0.3s ease, color 0.3s ease;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .logo:hover {\n");
      out.write("                transform: scale(1.05);\n");
      out.write("                color: #f8f9fa;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .nav-links {\n");
      out.write("                list-style: none;\n");
      out.write("                display: flex;\n");
      out.write("                align-items: center;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .nav-links li {\n");
      out.write("                margin: 0 15px;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .nav-links a {\n");
      out.write("                color: white;\n");
      out.write("                text-decoration: none;\n");
      out.write("                font-size: 16px;\n");
      out.write("                font-weight: 500;\n");
      out.write("                padding: 8px 12px;\n");
      out.write("                border-radius: 8px;\n");
      out.write("                transition: all 0.3s ease;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .nav-links a:hover, .nav-links a:focus {\n");
      out.write("                background: rgba(255, 255, 255, 0.15);\n");
      out.write("                transform: translateY(-2px);\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .header-right {\n");
      out.write("                display: flex;\n");
      out.write("                align-items: center;\n");
      out.write("                gap: 10px;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .user-info {\n");
      out.write("                position: relative;\n");
      out.write("                display: flex;\n");
      out.write("                align-items: center;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .user-avatar {\n");
      out.write("                width: 40px;\n");
      out.write("                height: 40px;\n");
      out.write("                border-radius: 50%;\n");
      out.write("                background: #ffffff;\n");
      out.write("                display: flex;\n");
      out.write("                align-items: center;\n");
      out.write("                justify-content: center;\n");
      out.write("                cursor: pointer;\n");
      out.write("                transition: transform 0.3s ease, box-shadow 0.3s ease;\n");
      out.write("                overflow: hidden;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .user-avatar:hover {\n");
      out.write("                transform: scale(1.1);\n");
      out.write("                box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .user-avatar img {\n");
      out.write("                width: 100%;\n");
      out.write("                height: 100%;\n");
      out.write("                object-fit: cover;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .user-avatar span {\n");
      out.write("                font-size: 20px;\n");
      out.write("                font-weight: 600;\n");
      out.write("                color: #5DC1B9;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .dropdown-menu {\n");
      out.write("                display: none;\n");
      out.write("                position: absolute;\n");
      out.write("                top: 100%;\n");
      out.write("                right: 0;\n");
      out.write("                background: linear-gradient(45deg, rgba(93, 193, 185, 0.9), rgba(78, 205, 196, 0.9));\n");
      out.write("                box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);\n");
      out.write("                border-radius: 12px;\n");
      out.write("                list-style: none;\n");
      out.write("                padding: 15px;\n");
      out.write("                min-width: 220px;\n");
      out.write("                z-index: 1001;\n");
      out.write("                backdrop-filter: blur(5px);\n");
      out.write("                border: 1px solid rgba(255, 255, 255, 0.2);\n");
      out.write("                transition: opacity 0.2s ease-in-out;\n");
      out.write("                opacity: 0;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .user-info:hover .dropdown-menu {\n");
      out.write("                display: block;\n");
      out.write("                opacity: 1;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .dropdown-menu .user-profile {\n");
      out.write("                display: flex;\n");
      out.write("                flex-direction: column;\n");
      out.write("                align-items: center;\n");
      out.write("                padding: 15px 0;\n");
      out.write("                border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n");
      out.write("                margin-bottom: 10px;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .dropdown-menu .user-profile .avatar {\n");
      out.write("                width: 60px;\n");
      out.write("                height: 60px;\n");
      out.write("                border-radius: 50%;\n");
      out.write("                background: #ffffff;\n");
      out.write("                display: flex;\n");
      out.write("                align-items: center;\n");
      out.write("                justify-content: center;\n");
      out.write("                margin-bottom: 10px;\n");
      out.write("                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n");
      out.write("                overflow: hidden;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .dropdown-menu .user-profile .avatar img {\n");
      out.write("                width: 100%;\n");
      out.write("                height: 100%;\n");
      out.write("                object-fit: cover;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .dropdown-menu .user-profile .avatar span {\n");
      out.write("                font-size: 28px;\n");
      out.write("                font-weight: 600;\n");
      out.write("                color: #5DC1B9;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .dropdown-menu .user-profile .name {\n");
      out.write("                font-size: 16px;\n");
      out.write("                font-weight: 500;\n");
      out.write("                color: white;\n");
      out.write("                text-align: center;\n");
      out.write("                padding: 0 10px;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .dropdown-menu li {\n");
      out.write("                margin: 5px 0;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .dropdown-menu a {\n");
      out.write("                display: block;\n");
      out.write("                color: white;\n");
      out.write("                text-decoration: none;\n");
      out.write("                font-size: 14px;\n");
      out.write("                font-weight: 500;\n");
      out.write("                padding: 10px 20px;\n");
      out.write("                border-radius: 8px;\n");
      out.write("                transition: all 0.3s ease;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .dropdown-menu a:hover {\n");
      out.write("                background: rgba(255, 255, 255, 0.2);\n");
      out.write("                transform: translateX(5px);\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .login-btn {\n");
      out.write("                padding: 8px 20px;\n");
      out.write("                text-decoration: none;\n");
      out.write("                border-radius: 25px;\n");
      out.write("                font-size: 14px;\n");
      out.write("                font-weight: 600;\n");
      out.write("                background: linear-gradient(45deg, #ff6b6b, #e74c3c);\n");
      out.write("                color: white;\n");
      out.write("                position: relative;\n");
      out.write("                overflow: hidden;\n");
      out.write("                transition: all 0.3s ease;\n");
      out.write("                box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);\n");
      out.write("                border: 1px solid rgba(255, 255, 255, 0.2);\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .login-btn:hover {\n");
      out.write("                background: linear-gradient(45deg, #ff8787, #ff5e5e);\n");
      out.write("                transform: scale(1.05) translateY(-2px);\n");
      out.write("                box-shadow: 0 6px 18px rgba(231, 76, 60, 0.5);\n");
      out.write("                color: #fff;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .login-btn::before {\n");
      out.write("                content: '';\n");
      out.write("                position: absolute;\n");
      out.write("                top: 50%;\n");
      out.write("                left: 50%;\n");
      out.write("                width: 0;\n");
      out.write("                height: 0;\n");
      out.write("                background: rgba(255, 255, 255, 0.3);\n");
      out.write("                border-radius: 50%;\n");
      out.write("                transform: translate(-50%, -50%);\n");
      out.write("                transition: width 0.6s ease, height 0.6s ease;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .login-btn:hover::before {\n");
      out.write("                width: 200px;\n");
      out.write("                height: 200px;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .menu-toggle {\n");
      out.write("                display: none;\n");
      out.write("                font-size: 28px;\n");
      out.write("                cursor: pointer;\n");
      out.write("                color: white;\n");
      out.write("                transition: transform 0.3s ease;\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            .menu-toggle:hover {\n");
      out.write("                transform: scale(1.1);\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            @media (max-width: 768px) {\n");
      out.write("                header {\n");
      out.write("                    padding: 10px 20px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .nav-links {\n");
      out.write("                    display: none;\n");
      out.write("                    flex-direction: column;\n");
      out.write("                    background: linear-gradient(45deg, #5DC1B9, #4ECDC4);\n");
      out.write("                    position: absolute;\n");
      out.write("                    width: 100%;\n");
      out.write("                    left: 0;\n");
      out.write("                    top: 60px;\n");
      out.write("                    text-align: center;\n");
      out.write("                    padding: 15px 0;\n");
      out.write("                    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .nav-links.active {\n");
      out.write("                    display: flex;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .nav-links li {\n");
      out.write("                    margin: 10px 0;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .nav-links a {\n");
      out.write("                    display: block;\n");
      out.write("                    padding: 10px 20px;\n");
      out.write("                    font-size: 16px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .header-right {\n");
      out.write("                    flex-direction: column;\n");
      out.write("                    align-items: flex-end;\n");
      out.write("                    gap: 5px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .user-avatar {\n");
      out.write("                    width: 35px;\n");
      out.write("                    height: 35px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .user-avatar img {\n");
      out.write("                    width: 100%;\n");
      out.write("                    height: 100%;\n");
      out.write("                    object-fit: cover;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .user-avatar span {\n");
      out.write("                    font-size: 18px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .dropdown-menu {\n");
      out.write("                    display: none;\n");
      out.write("                    position: static;\n");
      out.write("                    width: 100%;\n");
      out.write("                    background: linear-gradient(45deg, rgba(93, 193, 185, 0.9), rgba(78, 205, 196, 0.9));\n");
      out.write("                    box-shadow: none;\n");
      out.write("                    border-radius: 0;\n");
      out.write("                    padding: 10px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .user-info:hover .dropdown-menu {\n");
      out.write("                    display: none;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .user-info.active .dropdown-menu {\n");
      out.write("                    display: block;\n");
      out.write("                    opacity: 1;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .dropdown-menu .user-profile .avatar {\n");
      out.write("                    width: 50px;\n");
      out.write("                    height: 50px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .dropdown-menu .user-profile .avatar img {\n");
      out.write("                    width: 100%;\n");
      out.write("                    height: 100%;\n");
      out.write("                    object-fit: cover;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .dropdown-menu .user-profile .avatar span {\n");
      out.write("                    font-size: 24px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .dropdown-menu .user-profile .name {\n");
      out.write("                    font-size: 14px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .login-btn {\n");
      out.write("                    padding: 6px 16px;\n");
      out.write("                    font-size: 12px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .menu-toggle {\n");
      out.write("                    display: block;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("                .container {\n");
      out.write("                    height: 50px;\n");
      out.write("                }\n");
      out.write("\n");
      out.write("            }\n");
      out.write("        </style>\n");
      out.write("\n");
      out.write("    </head>\n");
      out.write("    <body>\n");
      out.write("        <header>\n");
      out.write("            <div class=\"container\">\n");
      out.write("                <div class=\"logo\">üè° KiBaKa Homestay</div>\n");
      out.write("                <nav>\n");
      out.write("                    <ul class=\"nav-links\">\n");
      out.write("                        <li><a href=\"");
      out.print( request.getContextPath());
      out.write("/home.jsp\">Trang ch·ªß</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print( request.getContextPath());
      out.write("/search.jsp\">Homestay</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print( request.getContextPath());
      out.write("/services.jsp\">D·ªãch v·ª•</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print( request.getContextPath());
      out.write("/contact.jsp\">Li√™n h·ªá</a></li>\n");
      out.write("                        <li><a href=\"");
      out.print( request.getContextPath());
      out.write("/notifications.jsp\">Th√¥ng b√°o</a></li>\n");
      out.write("                            ");

                                UserDTO user = (UserDTO) session.getAttribute("user");
                                if (user != null && "AD".equals(user.getRoleID())) {
                            
      out.write("\n");
      out.write("                        <li><a href=\"");
      out.print( request.getContextPath());
      out.write("/admin/dashboard.jsp\">Admin Dashboard</a></li>\n");
      out.write("                            ");
 } 
      out.write("\n");
      out.write("                    </ul>\n");
      out.write("                </nav>\n");
      out.write("                <div class=\"header-right\">\n");
      out.write("                    ");

                        if (user != null) {
                            String fullName = user.getFullName();
                            String avatarInitial = fullName != null && !fullName.isEmpty() ? fullName.substring(0, 1).toUpperCase() : "U";
                    
      out.write("\n");
      out.write("                    <div class=\"user-info\">\n");
      out.write("                        <div class=\"user-avatar\">\n");
      out.write("                            ");
 if (user.getAvatarUrl() != null && !user.getAvatarUrl().isEmpty()) {
      out.write("\n");
      out.write("                            <img src=\"");
      out.print( user.getAvatarUrl());
      out.write("\" alt=\"Avatar\" style=\"width: 100%; height: 100%; border-radius: 50%; object-fit: cover;\">\n");
      out.write("                            ");
 } else {
      out.write("\n");
      out.write("                            <span>");
      out.print( avatarInitial);
      out.write("</span>\n");
      out.write("                            ");
 } 
      out.write("\n");
      out.write("                        </div>\n");
      out.write("                        <ul class=\"dropdown-menu\">\n");
      out.write("                            <li class=\"user-profile\">\n");
      out.write("                                <div class=\"avatar\">\n");
      out.write("                                    ");
 if (user.getAvatarUrl() != null && !user.getAvatarUrl().isEmpty()) {
      out.write("\n");
      out.write("                                    <img src=\"");
      out.print( user.getAvatarUrl());
      out.write("\" alt=\"Avatar\" style=\"width: 100%; height: 100%; border-radius: 50%; object-fit: cover;\">\n");
      out.write("                                    ");
 } else {
      out.write("\n");
      out.write("                                    <span>");
      out.print( avatarInitial);
      out.write("</span>\n");
      out.write("                                    ");
 }
      out.write("\n");
      out.write("                                </div>\n");
      out.write("                                <span class=\"name\">");
      out.print( fullName != null ? fullName : "Ng∆∞·ªùi d√πng");
      out.write("</span>\n");
      out.write("                            </li>\n");
      out.write("                            <li><a href=\"");
      out.print( request.getContextPath());
      out.write("/viewBookings\">ƒê∆°n c·ªßa t√¥i</a></li>\n");
      out.write("                            <li><a href=\"");
      out.print( request.getContextPath());
      out.write("/profile.jsp\">Th√¥ng tin c√° nh√¢n</a></li>\n");
      out.write("                            <li><a href=\"");
      out.print( request.getContextPath());
      out.write("/login?action=logout\">ƒêƒÉng xu·∫•t</a></li>\n");
      out.write("                        </ul>\n");
      out.write("                    </div>\n");
      out.write("                    ");
 } else {
      out.write("\n");
      out.write("                    <a href=\"");
      out.print( request.getContextPath());
      out.write("/login-regis.jsp\" class=\"login-btn\">ƒêƒÉng nh·∫≠p</a>\n");
      out.write("                    ");
 }
      out.write("\n");
      out.write("                </div>\n");
      out.write("                <div class=\"menu-toggle\">‚ò∞</div>\n");
      out.write("            </div>\n");
      out.write("        </header>\n");
      out.write("\n");
      out.write("        <script>\n");
      out.write("            document.querySelector(\".menu-toggle\").addEventListener(\"click\", function () {\n");
      out.write("                document.querySelector(\".nav-links\").classList.toggle(\"active\");\n");
      out.write("            });\n");
      out.write("\n");
      out.write("            const userInfo = document.querySelector(\".user-info\");\n");
      out.write("            if (window.innerWidth <= 768 && userInfo) {\n");
      out.write("                document.querySelector(\".user-avatar\").addEventListener(\"click\", function (e) {\n");
      out.write("                    e.preventDefault();\n");
      out.write("                    userInfo.classList.toggle(\"active\");\n");
      out.write("                });\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            window.addEventListener(\"scroll\", function () {\n");
      out.write("                const header = document.querySelector(\"header\");\n");
      out.write("                if (window.scrollY > 50) {\n");
      out.write("                    header.style.boxShadow = \"0 4px 12px rgba(0, 0, 0, 0.2)\";\n");
      out.write("                } else {\n");
      out.write("                    header.style.boxShadow = \"0 2px 10px rgba(0, 0, 0, 0.1)\";\n");
      out.write("                }\n");
      out.write("            });\n");
      out.write("        </script>\n");
      out.write("    </body>\n");
      out.write("</body>\n");
      out.write("</html>");
      out.write("\n");
      out.write("    </div>\n");
      out.write("\n");
      out.write("    <div class=\"main-content\">\n");
      out.write("        ");

            RoomDTO room = (RoomDTO) request.getAttribute("room");
            if (room == null) {
        
      out.write("\n");
      out.write("        <div style=\"text-align: center; margin-top: 50px;\">\n");
      out.write("            <h2 style=\"font-size: 28px; color: #2c3e50;\">Kh√¥ng t√¨m th·∫•y th√¥ng tin ph√≤ng!</h2>\n");
      out.write("            <a href=\"home.jsp\" class=\"btn-book\" style=\"background: linear-gradient(45deg, #5DC1B9, #4ECDC4); padding: 12px 25px; font-size: 18px;\">Quay l·∫°i trang ch·ªß</a>\n");
      out.write("        </div>\n");
      out.write("        ");

        } else {
        
      out.write("\n");
      out.write("\n");
      out.write("        <div class=\"room-layout\">\n");
      out.write("            <div class=\"room-gallery-section\">\n");
      out.write("                <div class=\"room-gallery\">\n");
      out.write("                    ");

                        List<String> detailImages = room.getDetailImages();
                        if (detailImages == null || detailImages.isEmpty()) {
                            detailImages = new java.util.ArrayList<String>();
                            detailImages.add(room.getImageUrl());
                        } else if (!detailImages.contains(room.getImageUrl())) {
                            detailImages.add(0, room.getImageUrl());
                        }
                        for (int i = 0; i < detailImages.size(); i++) {
                            String imageUrl = detailImages.get(i);
                            String activeClass = (i == 0) ? "active" : "";
                    
      out.write("\n");
      out.write("                    <img src=\"");
      out.print( imageUrl );
      out.write("\" alt=\"");
      out.print( room.getName() );
      out.write("\" class=\"");
      out.print( activeClass );
      out.write("\">\n");
      out.write("                    ");

                        }
                    
      out.write("\n");
      out.write("                    <button class=\"prev\" onclick=\"changeImage(-1)\">‚ùÆ</button>\n");
      out.write("                    <button class=\"next\" onclick=\"changeImage(1)\">‚ùØ</button>\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("\n");
      out.write("            <div class=\"scrollable-content\">\n");
      out.write("                <div class=\"room-info-section\">\n");
      out.write("                    <h2>");
      out.print( room.getName() );
      out.write("</h2>\n");
      out.write("                    <p>");
      out.print( room.getDescription() != null ? room.getDescription() : "Ch∆∞a c√≥ m√¥ t·∫£" );
      out.write("</p>\n");
      out.write("                    <p><strong>Gi√°:</strong> ");
      out.print( String.format("%,.0f", room.getPrice()) );
      out.write("ƒë / ƒë√™m</p>\n");
      out.write("                    <p><strong>Ti·ªán nghi:</strong> ");
      out.print( room.getAmenities() != null ? room.getAmenities() : "Kh√¥ng c√≥ th√¥ng tin" );
      out.write("</p>\n");
      out.write("                    <p><strong>ƒê√°nh gi√°:</strong> ");
      out.print( room.getRatings() );
      out.write(" ‚≠ê</p>\n");
      out.write("\n");
      out.write("                    <div class=\"room-amenities\">\n");
      out.write("                        <h3>Ti·ªán √≠ch</h3>\n");
      out.write("                        <div class=\"amenities-list\">\n");
      out.write("                            <div class=\"amenity-item\"><i class=\"fas fa-wifi\"></i><p>Wifi mi·ªÖn ph√≠</p></div>\n");
      out.write("                            <div class=\"amenity-item\"><i class=\"fas fa-swimming-pool\"></i><p>H·ªì b∆°i</p></div>\n");
      out.write("                            <div class=\"amenity-item\"><i class=\"fas fa-parking\"></i><p>B√£i ƒë·ªó xe</p></div>\n");
      out.write("                            <div class=\"amenity-item\"><i class=\"fas fa-utensils\"></i><p>Nhi·ªÅu ti·ªán √≠ch xung quanh</p></div>\n");
      out.write("                        </div>\n");
      out.write("                    </div>\n");
      out.write("\n");
      out.write("                    <!-- Ph·∫ßn ƒë√°nh gi√° -->\n");
      out.write("                    <div class=\"room-reviews\">\n");
      out.write("                        <h3>ƒê√°nh gi√°</h3>\n");
      out.write("                        <!-- Div ƒë·ªÉ hi·ªÉn th·ªã th√¥ng b√°o -->\n");
      out.write("                        <div id=\"review-message\" style=\"color: red; margin-bottom: 15px; display: none;\"></div>\n");
      out.write("                        \n");
      out.write("                        <div class=\"review-form\">\n");
      out.write("                            <h4>Vi·∫øt ƒë√°nh gi√° c·ªßa b·∫°n</h4>\n");
      out.write("                            <form id=\"review-form\" method=\"post\">\n");
      out.write("                                <input type=\"hidden\" name=\"roomId\" value=\"");
      out.print( room.getId() );
      out.write("\">\n");
      out.write("                                <div class=\"rating-stars\">\n");
      out.write("                                    <span class=\"star\" data-value=\"1\">‚òÖ</span>\n");
      out.write("                                    <span class=\"star\" data-value=\"2\">‚òÖ</span>\n");
      out.write("                                    <span class=\"star\" data-value=\"3\">‚òÖ</span>\n");
      out.write("                                    <span class=\"star\" data-value=\"4\">‚òÖ</span>\n");
      out.write("                                    <span class=\"star\" data-value=\"5\">‚òÖ</span>\n");
      out.write("                                </div>\n");
      out.write("                                <input type=\"hidden\" name=\"rating\" id=\"rating-value\" value=\"0\">\n");
      out.write("                                <textarea name=\"comment\" placeholder=\"Nh·∫≠p b√¨nh lu·∫≠n c·ªßa b·∫°n...\" rows=\"4\" required></textarea>\n");
      out.write("                                <button type=\"submit\">G·ª≠i ƒë√°nh gi√°</button>\n");
      out.write("                            </form>\n");
      out.write("                        </div>\n");
      out.write("\n");
      out.write("                        <div class=\"review-list\">\n");
      out.write("                            ");

                                ReviewDAO reviewDAO = new ReviewDAO();
                                UserDAO userDAO = new UserDAO();
                                List<ReviewDTO> reviews = reviewDAO.getReviewsByRoomId(room.getId());
                                SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy HH:mm");
                                if (reviews != null && !reviews.isEmpty()) {
                                    for (ReviewDTO review : reviews) {
                                        UserDTO reviewer = userDAO.readById(review.getUserId());
                                        String reviewerName = reviewer != null ? reviewer.getFullName() : review.getUserId();
                                        StringBuilder stars = new StringBuilder();
                                        int rating = (int) review.getRating();
                                        for (int i = 0; i < rating; i++) {
                                            stars.append("‚≠ê");
                                        }
                            
      out.write("\n");
      out.write("                            <div class=\"review-item\">\n");
      out.write("                                <p><strong>");
      out.print( reviewerName );
      out.write(":</strong></p>\n");
      out.write("                                <p class=\"rating\">");
      out.print( stars.toString() );
      out.write("</p>\n");
      out.write("                                <p>");
      out.print( review.getComment() );
      out.write("</p>\n");
      out.write("                                <p><small>");
      out.print( sdf.format(review.getCreatedAt()) );
      out.write("</small></p>\n");
      out.write("                            </div>\n");
      out.write("                            ");

                                    }
                                } else {
                            
      out.write("\n");
      out.write("                            <p>Ch∆∞a c√≥ ƒë√°nh gi√° n√†o cho ph√≤ng n√†y.</p>\n");
      out.write("                            ");

                                }
                            
      out.write("\n");
      out.write("                        </div>\n");
      out.write("                    </div>\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("\n");
      out.write("            <div class=\"action-info-section\">\n");
      out.write("                <div class=\"price\">");
      out.print( String.format("%,.0f", room.getPrice()) );
      out.write("ƒë</div>\n");
      out.write("                <div class=\"rating\">\n");
      out.write("                    ƒê√°nh gi√°: ");
      out.print( room.getRatings() );
      out.write(" <span class=\"stars\">‚≠ê</span> (");
      out.print( room.getRatings() );
      out.write("/5)\n");
      out.write("                </div>\n");
      out.write("                <a href=\"booking.jsp?roomId=");
      out.print( room.getId() );
      out.write("\" class=\"btn-book\">ƒê·∫∑t ngay</a>\n");
      out.write("                <div class=\"contact-info\">\n");
      out.write("                    <h4>Li√™n h·ªá nhanh</h4>\n");
      out.write("                    <p><i class=\"fas fa-phone-alt\"></i> 0909 123 456</p>\n");
      out.write("                    <p><i class=\"fas fa-envelope\"></i> homestay@example.com</p>\n");
      out.write("                    <a href=\"https://facebook.com/yourpage\" target=\"_blank\" class=\"btn-contact\" style=\"background: linear-gradient(45deg, #1877F2, #3B5998);\">\n");
      out.write("                        <i class=\"fab fa-facebook-f\"></i> Li√™n h·ªá qua Facebook\n");
      out.write("                    </a>\n");
      out.write("                    <a href=\"https://instagram.com/yourpage\" target=\"_blank\" class=\"btn-contact\" style=\"background: linear-gradient(45deg, #C13584, #E1306C, #F77737);\">\n");
      out.write("                        <i class=\"fab fa-instagram\"></i> Li√™n h·ªá qua Instagram\n");
      out.write("                    </a>\n");
      out.write("                    <a href=\"https://zalo.me/0909123456\" target=\"_blank\" class=\"btn-contact\" style=\"background: linear-gradient(45deg, #00A2FF, #0078D4);\">\n");
      out.write("                        <i class=\"fas fa-comment-dots\"></i> Li√™n h·ªá qua Zalo\n");
      out.write("                    </a>\n");
      out.write("                </div>          \n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("\n");
      out.write("        <div class=\"room-location\">\n");
      out.write("            <h3>V·ªã tr√≠</h3>\n");
      out.write("            <p><strong>ƒê·ªãa ch·ªâ:</strong> S702 Vinhome Grand Park, Qu·∫≠n 9</p>\n");
      out.write("            <iframe src=\"https://maps.google.com/maps?width=100%25&height=600&hl=en&q=S702%20Vinhomes%20GrandPark,%20Qu%E1%BA%ADn%209+(HomeStay)&t=&z=14&ie=UTF8&iwloc=B&output=embed\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n");
      out.write("        </div>\n");
      out.write("        ");

            }
        
      out.write("\n");
      out.write("    </div>\n");
      out.write("\n");
      out.write("    <div class=\"footer-container\">\n");
      out.write("        ");
      out.write("\n");
      out.write("<footer>\n");
      out.write("    <div class=\"footer-content\">\n");
      out.write("        <p>¬© 2025 Homestay Booking. T·∫•t c·∫£ quy·ªÅn l·ª£i ƒë∆∞·ª£c b·∫£o v·ªá.</p>\n");
      out.write("\n");
      out.write("        <!-- Social media icons (FontAwesome) -->\n");
      out.write("<!--        <div class=\"social-links\">\n");
      out.write("            <a href=\"https://www.facebook.com\" class=\"social-icon\" title=\"Facebook\" target=\"_blank\" rel=\"noopener noreferrer\">\n");
      out.write("                <i class=\"fab fa-facebook-f\"></i>\n");
      out.write("            </a>\n");
      out.write("            <a href=\"https://www.instagram.com\" class=\"social-icon\" title=\"Instagram\" target=\"_blank\" rel=\"noopener noreferrer\">\n");
      out.write("                <i class=\"fab fa-instagram\"></i>\n");
      out.write("            </a>\n");
      out.write("            <a href=\"https://zalo.me\" class=\"social-icon\" title=\"Zalo\" target=\"_blank\" rel=\"noopener noreferrer\">\n");
      out.write("                <i class=\"fab fa-zalo\"></i> \n");
      out.write("            </a>\n");
      out.write("        </div>\n");
      out.write("    </div>-->\n");
      out.write("    \n");
      out.write("    <!-- Social media logos (images) -->\n");
      out.write("    <div class=\"social-logos\">\n");
      out.write("        <a href=\"https://www.facebook.com\" class=\"logo-link\" target=\"_blank\" rel=\"noopener noreferrer\">\n");
      out.write("            <img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/512px-2021_Facebook_icon.svg.png\" alt=\"Facebook\" loading=\"lazy\">\n");
      out.write("        </a>\n");
      out.write("        <a href=\"https://www.instagram.com\" class=\"logo-link\" target=\"_blank\" rel=\"noopener noreferrer\">\n");
      out.write("            <img src=\"https://cdn-icons-png.flaticon.com/512/1409/1409946.png\" alt=\"Instagram\" loading=\"lazy\">\n");
      out.write("        </a>\n");
      out.write("        <a href=\"https://zalo.me\" class=\"logo-link\" target=\"_blank\" rel=\"noopener noreferrer\">\n");
      out.write("            <img src=\"https://haiauint.vn/wp-content/uploads/2024/02/zalo-icon.png\" alt=\"Zalo\" loading=\"lazy\">\n");
      out.write("        </a>\n");
      out.write("    </div>\n");
      out.write("</footer>\n");
      out.write("\n");
      out.write("<style>\n");
      out.write("    /* Reset CSS */\n");
      out.write("    * {\n");
      out.write("        margin: 0;\n");
      out.write("        padding: 0;\n");
      out.write("        box-sizing: border-box;\n");
      out.write("    }\n");
      out.write("\n");
      out.write("    /* Footer styling */\n");
      out.write("    footer {\n");
      out.write("        background: linear-gradient(45deg, #5DC1B9, #4ECDC4); /* Gradient for modern look */\n");
      out.write("        color: white;\n");
      out.write("        text-align: center;\n");
      out.write("        padding: 10px 0; \n");
      out.write("        font-family: 'Segoe UI', Arial, sans-serif; \n");
      out.write("        position: relative; \n");
      out.write("        bottom: 0;\n");
      out.write("        left: 0;\n");
      out.write("        width: 100%; \n");
      out.write("        z-index: 999; \n");
      out.write("        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1); \n");
      out.write("        height: 80px; \n");
      out.write("    }\n");
      out.write("\n");
      out.write("    .footer-content {\n");
      out.write("        max-width: 1200px;\n");
      out.write("        margin: 0 auto;\n");
      out.write("        display: flex;\n");
      out.write("        flex-direction: column;\n");
      out.write("        align-items: center;\n");
      out.write("        gap: 5px;\n");
      out.write("        height: 100%; \n");
      out.write("        justify-content: space-between;\n");
      out.write("    }\n");
      out.write("\n");
      out.write("    .footer-content p {\n");
      out.write("        font-size: 14px;\n");
      out.write("        font-weight: 500;\n");
      out.write("        margin: 0;\n");
      out.write("    }\n");
      out.write("\n");
      out.write("    /* Social media icons (FontAwesome) */\n");
      out.write("    .social-links {\n");
      out.write("        display: flex;\n");
      out.write("        justify-content: center;\n");
      out.write("        gap: 15px;\n");
      out.write("        margin-top: 0; \n");
      out.write("    }\n");
      out.write("\n");
      out.write("    .social-icon {\n");
      out.write("        font-size: 18px;\n");
      out.write("        color: white;\n");
      out.write("        transition: transform 0.3s ease, color 0.3s ease;\n");
      out.write("    }\n");
      out.write("\n");
      out.write("    .social-icon:hover {\n");
      out.write("        color: #f8f9fa;\n");
      out.write("        transform: scale(1.2);\n");
      out.write("    }\n");
      out.write("\n");
      out.write("    /* Social media logos (images) */\n");
      out.write("    .social-logos {\n");
      out.write("        display: flex;\n");
      out.write("        justify-content: center;\n");
      out.write("        gap: 10px; \n");
      out.write("        margin-top: -30px; \n");
      out.write("        align-items: center; \n");
      out.write("    }\n");
      out.write("\n");
      out.write("    .logo-link img {\n");
      out.write("        width: 30px; \n");
      out.write("        height: 30px;\n");
      out.write("        transition: transform 0.3s ease;\n");
      out.write("        filter: brightness(1.1);\n");
      out.write("        object-fit: contain; \n");
      out.write("    }\n");
      out.write("\n");
      out.write("    .logo-link img:hover {\n");
      out.write("        transform: scale(1.2);\n");
      out.write("    }\n");
      out.write("\n");
      out.write("    /* Responsive Design */\n");
      out.write("    @media (max-width: 768px) {\n");
      out.write("        footer {\n");
      out.write("            padding: 5px 0; \n");
      out.write("            height: 70px; \n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .footer-content p {\n");
      out.write("            font-size: 12px;\n");
      out.write("            margin: 0;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .social-links, .social-logos {\n");
      out.write("            gap: 8px; \n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .social-icon {\n");
      out.write("            font-size: 16px;\n");
      out.write("        }\n");
      out.write("\n");
      out.write("        .logo-link img {\n");
      out.write("            width: 25px; \n");
      out.write("            height: 25px;\n");
      out.write("        }\n");
      out.write("    }\n");
      out.write("</style>\n");
      out.write("\n");
      out.write("<script>\n");
      out.write("    document.addEventListener(\"DOMContentLoaded\", function () {\n");
      out.write("        console.log(\"Footer script loaded!\");\n");
      out.write("    });\n");
      out.write("</script>\n");
      out.write("\n");
      out.write("<!-- Import FontAwesome (moved to including page if needed) -->\n");
      out.write("<!-- <script src=\"https://kit.fontawesome.com/a076d05399.js\" crossorigin=\"anonymous\"></script> -->");
      out.write("\n");
      out.write("    </div>\n");
      out.write("\n");
      out.write("    <!-- JavaScript ƒë√£ ch·ªânh s·ª≠a -->\n");
      out.write("    <script>\n");
      out.write("        var currentIndex = 0;\n");
      out.write("        var images = document.querySelectorAll('.room-gallery img');\n");
      out.write("        function showImage(index) {\n");
      out.write("            images.forEach(function(img, i) {\n");
      out.write("                img.classList.remove('active');\n");
      out.write("                if (i === index) img.classList.add('active');\n");
      out.write("            });\n");
      out.write("        }\n");
      out.write("        function changeImage(direction) {\n");
      out.write("            currentIndex += direction;\n");
      out.write("            if (currentIndex < 0) currentIndex = images.length - 1;\n");
      out.write("            else if (currentIndex >= images.length) currentIndex = 0;\n");
      out.write("            showImage(currentIndex);\n");
      out.write("        }\n");
      out.write("        showImage(currentIndex);\n");
      out.write("\n");
      out.write("        // Rating Stars\n");
      out.write("        var stars = document.querySelectorAll('.rating-stars .star');\n");
      out.write("        var ratingInput = document.getElementById('rating-value');\n");
      out.write("        stars.forEach(function(star) {\n");
      out.write("            star.addEventListener('click', function() {\n");
      out.write("                var value = star.getAttribute('data-value');\n");
      out.write("                ratingInput.value = value;\n");
      out.write("                stars.forEach(function(s) {\n");
      out.write("                    s.classList.remove('active');\n");
      out.write("                    if (s.getAttribute('data-value') <= value) s.classList.add('active');\n");
      out.write("                });\n");
      out.write("            });\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        // X·ª≠ l√Ω g·ª≠i ƒë√°nh gi√° qua AJAX\n");
      out.write("        document.getElementById('review-form').addEventListener('submit', function(e) {\n");
      out.write("            e.preventDefault(); // NgƒÉn form submit th√¥ng th∆∞·ªùng\n");
      out.write("\n");
      out.write("            var form = this;\n");
      out.write("            var formData = new FormData(form);\n");
      out.write("            var messageDiv = document.getElementById('review-message');\n");
      out.write("\n");
      out.write("            fetch('submit-review', {\n");
      out.write("                method: 'POST',\n");
      out.write("                body: formData\n");
      out.write("            })\n");
      out.write("            .then(response => {\n");
      out.write("                // N·∫øu response l√† redirect (ch∆∞a ƒëƒÉng nh·∫≠p)\n");
      out.write("                if (response.redirected) {\n");
      out.write("                    messageDiv.style.display = 'block';\n");
      out.write("                    messageDiv.textContent = 'Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒë√°nh gi√°!';\n");
      out.write("                    setTimeout(() => {\n");
      out.write("                        messageDiv.style.display = 'none';\n");
      out.write("                    }, 5000); // ·∫®n th√¥ng b√°o sau 5 gi√¢y\n");
      out.write("                    return null;\n");
      out.write("                }\n");
      out.write("                return response.text(); // Gi·∫£ s·ª≠ servlet tr·∫£ v·ªÅ text khi th√†nh c√¥ng\n");
      out.write("            })\n");
      out.write("            .then(data => {\n");
      out.write("                if (data) {\n");
      out.write("                    // N·∫øu g·ª≠i th√†nh c√¥ng, reload trang\n");
      out.write("                    location.reload();\n");
      out.write("                }\n");
      out.write("            })\n");
      out.write("            .catch(error => {\n");
      out.write("                console.error('Error:', error);\n");
      out.write("                messageDiv.style.display = 'block';\n");
      out.write("                messageDiv.textContent = 'C√≥ l·ªói x·∫£y ra, vui l√≤ng th·ª≠ l·∫°i!';\n");
      out.write("                setTimeout(() => {\n");
      out.write("                    messageDiv.style.display = 'none';\n");
      out.write("                }, 5000);\n");
      out.write("            });\n");
      out.write("        });\n");
      out.write("    </script>\n");
      out.write("</body>\n");
      out.write("</html>");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
